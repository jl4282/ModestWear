<!doctype html>
<html>

<head>
    <title>ThatGift</title>
    <link rel="stylesheet" href="style.css"></link>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://d7xe6yl2ckrgs.cloudfront.net/js/3/importio.js"></script>
    <meta name="description" content="ThatGift is you gift suggester that takes the guesswork out of giving. Simply enter a theme that the recipient loves, and we'll show you where to grab some great gifts.">
    <link rel="shortcut icon" href="images/icon.png" type="image/png"></link>
    <link href='http://fonts.googleapis.com/css?family=Damion' rel='stylesheet' type='text/css'></link>
    <link href='http://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'></link>
</head>

<body>
    <a name="topanchor" id="topanchor"><span></span></a>
    <header>
        <div class="toplogo"><a href="index.html">ThatGift</a></div>
        <input type="text" id="topsearch" onchange="getResults1()" placeholder="Search for a theme"></input>
        <span class="icon"><a href="#" onclick="getResults1()">&#xf002;</a></span>
        <ul id="topnav">
            <li><a href="terms.html">Terms</a></li>
            <li>|</li>
            <li><a href="about.html">About</a></li>
            <li>|</li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </header>
    <Br><Br><br><br><br><Br>
    <h1 id="resulthead">gift results</h1>

    <div class="wrapper">


    <div id="result1" class="result"></div>
    <div id="result2" class="result"></div>
    <div id="result3" class="result"></div>
    <div id="result4" class="result"></div>
    <div id="result5" class="result"></div>
    <div id="result6" class="result"></div>
    <div id="result7" class="result"></div>
    <div id="result8" class="result"></div>
    <div id="result9" class="result"></div>
    <div id="result10" class="result"></div>
    <div id="result11" class="result"></div>
    <div id="result12" class="result"></div>
    <div id="result13" class="result"></div>
    <div id="result14" class="result"></div>
    <div id="result15" class="result"></div>
    <div id="result16" class="result"></div>
    <div id="result17" class="result"></div>
    <div id="result18" class="result"></div>
    <div id="result19" class="result"></div>
    <div id="result20" class="result"></div>
    <div id="result21" class="result"></div>
    <div id="result22" class="result"></div>
    <div id="result23" class="result"></div>
    <div id="result24" class="result"></div>
    <div id="result25" class="result"></div>
    <div id="result26" class="result"></div>
    <div id="result27" class="result"></div>
    <div id="result28" class="result"></div>
    <div id="result29" class="result"></div>
    <div id="result30" class="result"></div>
    <div id="result31" class="result"></div>
    <div id="result32" class="result"></div>
    <div id="result33" class="result"></div>
    <div id="result34" class="result"></div>
    <div id="result35" class="result"></div>
    <div id="result36" class="result"></div>
    <div id="result37" class="result"></div>
    <div id="result38" class="result"></div>
    <div id="result39" class="result"></div>
    <div id="result40" class="result"></div>
    <div id="result41" class="result"></div>
    <div id="result42" class="result"></div>
    <div id="result43" class="result"></div>
    <div id="result44" class="result"></div>
    <div id="result45" class="result"></div>
    <div id="result46" class="result"></div>
    <div id="result47" class="result"></div>
    <div id="result48" class="result"></div>
    <div id="result49" class="result"></div>
    <div id="result50" class="result"></div>
    <div id="result51" class="result"></div>
    <div id="result52" class="result"></div>
    <div id="result53" class="result"></div>
    <div id="result54" class="result"></div>
    <div id="result55" class="result"></div>
    <div id="result56" class="result"></div>
    <div id="result57" class="result"></div>
    <div id="result58" class="result"></div>
    <div id="result59" class="result"></div>
    <div id="result60" class="result"></div>
    <div id="result61" class="result"></div>
    <div id="result62" class="result"></div>
    <div id="result63" class="result"></div>
    <div id="result64" class="result"></div>
    <div id="result65" class="result"></div>
    <div id="result66" class="result"></div>
    <div id="result67" class="result"></div>
    <div id="result68" class="result"></div>
    <div id="result69" class="result"></div>
    <div id="result70" class="result"></div>
    <div id="result71" class="result"></div>
    <div id="result72" class="result"></div>
    <div id="result73" class="result"></div>
    <div id="result74" class="result"></div>
    <div id="result75" class="result"></div>
    <div id="result76" class="result"></div>
    <div id="result77" class="result"></div>
    <div id="result78" class="result"></div>
    <div id="result79" class="result"></div>
    <div id="result80" class="result"></div>
    <div id="result81" class="result"></div>
    <div id="result82" class="result"></div>
    <div id="result83" class="result"></div>
    <div id="result84" class="result"></div>
    <div id="result85" class="result"></div>
    <div id="result86" class="result"></div>
    <div id="result87" class="result"></div>
    <div id="result88" class="result"></div>
    <div id="result89" class="result"></div>
    <div id="result90" class="result"></div>
    <div id="result91" class="result"></div>
    <div id="result92" class="result"></div>
    <div id="result93" class="result"></div>
    <div id="result94" class="result"></div>
    <div id="result95" class="result"></div>
    <div id="result96" class="result"></div>
    <div id="result97" class="result"></div>
    <div id="result98" class="result"></div>
    <div id="result99" class="result"></div>
    <div id="result100" class="result"></div>
    <div id="result101" class="result"></div>
    <div id="result102" class="result"></div>
    <div id="result103" class="result"></div>
    <div id="result104" class="result"></div>
    <div id="result105" class="result"></div>
    <div id="result106" class="result"></div>
    <div id="result107" class="result"></div>
    <div id="result108" class="result"></div>
    <div id="result109" class="result"></div>
    <div id="result110" class="result"></div>
    <div id="result111" class="result"></div>
    <div id="result112" class="result"></div>
    <div id="result113" class="result"></div>
    <div id="result114" class="result"></div>
    <div id="result115" class="result"></div>
    <div id="result116" class="result"></div>
    <div id="result117" class="result"></div>
    <div id="result118" class="result"></div>
    <div id="result119" class="result"></div>
    <div id="result120" class="result"></div>
    <div id="result121" class="result"></div>
    <div id="result122" class="result"></div>
    <div id="result123" class="result"></div>
    <div id="result124" class="result"></div>
    <div id="result125" class="result"></div>
    <div id="result126" class="result"></div>
    <div id="result127" class="result"></div>
    <div id="result128" class="result"></div>
    <div id="result129" class="result"></div>
    <div id="result130" class="result"></div>
    <div id="result131" class="result"></div>
    <div id="result132" class="result"></div>
    <div id="result133" class="result"></div>
    <div id="result134" class="result"></div>
    <div id="result135" class="result"></div>
    <div id="result136" class="result"></div>
    <div id="result137" class="result"></div>
    <div id="result138" class="result"></div>
    <div id="result139" class="result"></div>
    <div id="result140" class="result"></div>
    <div id="result141" class="result"></div>
    <div id="result142" class="result"></div>
    <div id="result143" class="result"></div>
    <div id="result144" class="result"></div>
    <div id="result145" class="result"></div>
    <div id="result146" class="result"></div>
    <div id="result147" class="result"></div>
    <div id="result148" class="result"></div>
    <div id="result149" class="result"></div>
    <div id="result150" class="result"></div>
    <div id="result151" class="result"></div>
    <div id="result152" class="result"></div>
    <div id="result153" class="result"></div>
    <div id="result154" class="result"></div>
    <div id="result155" class="result"></div>
    <div id="result156" class="result"></div>
    <div id="result157" class="result"></div>
    <div id="result158" class="result"></div>
    <div id="result159" class="result"></div>
    <div id="result160" class="result"></div>
    <div id="result161" class="result"></div>
    <div id="result162" class="result"></div>
    <div id="result163" class="result"></div>
    <div id="result164" class="result"></div>
    <div id="result165" class="result"></div>
    <div id="result166" class="result"></div>
    <div id="result167" class="result"></div>
    <div id="result168" class="result"></div>
    <div id="result169" class="result"></div>
    <div id="result170" class="result"></div>
    <div id="result171" class="result"></div>
    <div id="result172" class="result"></div>
    <div id="result173" class="result"></div>
    <div id="result174" class="result"></div>
    <div id="result175" class="result"></div>
    <div id="result176" class="result"></div>
    <div id="result177" class="result"></div>
    <div id="result178" class="result"></div>
    <div id="result179" class="result"></div>
    <div id="result180" class="result"></div>
    <div id="result181" class="result"></div>
    <div id="result182" class="result"></div>
    <div id="result183" class="result"></div>
    <div id="result184" class="result"></div>
    <div id="result185" class="result"></div>
    <div id="result186" class="result"></div>
    <div id="result187" class="result"></div>
    <div id="result188" class="result"></div>
    <div id="result189" class="result"></div>
    <div id="result190" class="result"></div>
    <div id="result191" class="result"></div>
    <div id="result192" class="result"></div>
    <div id="result193" class="result"></div>
    <div id="result194" class="result"></div>
    <div id="result195" class="result"></div>
    <div id="result196" class="result"></div>
    <div id="result197" class="result"></div>
    <div id="result198" class="result"></div>
    <div id="result199" class="result"></div>
    <div id="result200" class="result"></div>

    </div>


<script>

        var number = 1;
        var maxnumber = 200;
        var newname = " ";
        var imagesource = " ";
        var newlink = " ";
        var newprice = " ";

        var choice = getUrlVars().theme;

        importio.init({
            "auth": {
                "userGuid": "09b9d6fe-5848-46aa-b048-2fc839f2c227",
                "apiKey": "J2pO4i8eI4J+qhuEuJu6AAbG+bUp89lxa2V7WTbi7Q3wPLEcJ+DCsFhouB0y7hk7HW6ECHl9OgiwFVBdt1t8dg=="
            },
            "host": "import.io"
        });

        function getUrlVars() {
            var vars = {};
            var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
                vars[key] = value;
            });
            return vars;
        }

        var moreResults = function(){
        number = 1;
        };

        var dataCallback = function(data) {


            
            for (var i = 0; i < 20; i++) {
                
                var d = data[i];
                
                for (var k in d.data) {
                    
                    resultnumber = "result" + number;
                    if (k == 'price') {
                        newprice = d.data[k];


                    }
                    if (k == 'name') {
                        newname = d.data[k];
                        if (newname.length > 10) newname = newname.substring(0, 30) + "...";

                    }
                    if (k == 'link') {
                    
                            newlink = "http://go.redirectingat.com?id=60890X1383514&xs=1&url=" + d.data[k];
                        
                    }
                    if (k == 'image') {
                        imagesource = d.data[k];

                    }
                }
                if (number<=maxnumber){
                document.getElementById(resultnumber).innerHTML="<a href='" + newlink + "' target='_blank'><img src='" + imagesource + "'><div class='resultname'>" + newname + "</div><span class='prices'>&#163;" + newprice + "</span></a>";

                number++;
            }
            
            }
        

        };
        var doneCallback = function(data) {
            console.log("Done, all data:", data);

        };


        var doQuery = function() {

            importio.query({
                "connectorGuids": [
                    "1f5bb571-b62e-4fbd-8714-c65651865bf7",
                     "5bdf3038-6e3d-4969-9290-7ddf173b7b84",
                      "20fca937-15a6-4ce2-ac4b-71f9a1d8d0b3",
                      "35d2d147-dd49-43c1-b779-41f7204c8a46",
                      "ee7a0038-1094-4549-a46a-8549c5ab272c",
                      "72a49146-527b-49dc-b044-45eb19ec8614"
                ],
                "input": {
                    "theme": choice
                }


            }, { "data": dataCallback, "done": doneCallback });
            
        }; 
        
        document.addEventListener('DOMContentLoaded', function () {
            doQuery();


        });


  </script>
  </body>

</html>
